<div class="modal-overlay" *ngIf="isOpen && card" (click)="close()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="task-title">{{ card.title }}</h2>
      <button class="close-button" (click)="close()">‚úï</button>
    </div>

    <div class="modal-body">
      <div class="task-info-grid">
        <div class="info-section">
          <div class="info-row">
            <span class="label">ID:</span>
            <span class="value">#{{ card.id }}</span>
          </div>
          <div class="info-row">
            <span class="label">Status:</span>
            <select 
              *ngIf="isStatusEditable()"
              class="value status-select"
              [(ngModel)]="selectedStatus">
              <option *ngFor="let option of statusOptions" [value]="option.value">
                {{ option.label }}
              </option>
            </select>
            <span *ngIf="!isStatusEditable()" class="value status-readonly done-status">
              ‚úÖ Done (Finalizado)
            </span>
          </div>
        </div>

        <div class="info-section">
          <div class="info-row">
            <span class="label">Prioridade:</span>
            <span class="value priority-badge" [ngClass]="getPriorityClass()">
              {{ getPriorityLabel(card.priority) }}
            </span>
          </div>
          <div class="info-row">
            <span class="label">Respons√°vel:</span>
            <span class="value assignee">
              <span class="assignee-icon">üë§</span>
              {{ card.assignee }}
            </span>
          </div>
        </div>

        <div class="info-section full-width">
          <div class="info-row">
            <span class="label">Data de Entrega:</span>
            <span class="value due-date">
              <span class="date-icon">üìÖ</span>
              {{ formatDate(card.dueDate) }}
            </span>
          </div>
        </div>
      </div>

      <div class="description-section">
        <h3>Descri√ß√£o</h3>
        <div class="description-content">
          {{ card.description }}
        </div>
      </div>

      <div class="actions-section">
        <div class="action-buttons">
          <button class="btn btn-danger" *ngIf="card" (click)="onDeleteClick()" title="Excluir tarefa">
            üóëÔ∏è Excluir
          </button>
          <button 
            class="btn btn-primary" 
            *ngIf="isStatusEditable()"
            [disabled]="!card || selectedStatus === card.status" 
            (click)="confirmStatusChange()">
            Confirmar
          </button>
          <button class="btn btn-secondary" (click)="close()">
            Fechar
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Confirma√ß√£o de Exclus√£o -->
<div class="confirmation-overlay" *ngIf="showDeleteConfirmation" (click)="cancelDelete()">
  <div class="confirmation-modal" (click)="$event.stopPropagation()">
    <div class="confirmation-header">
      <h3>‚ö†Ô∏è Confirmar Exclus√£o</h3>
    </div>
    <div class="confirmation-body">
      <p>Tem certeza de que deseja excluir esta tarefa?</p>
      <p><strong>"{{ card?.title }}"</strong></p>
      <p class="warning-text">Esta a√ß√£o n√£o pode ser desfeita.</p>
    </div>
    <div class="confirmation-actions">
      <button class="btn btn-danger" (click)="confirmDelete()">
        üóëÔ∏è Sim, Excluir
      </button>
      <button class="btn btn-secondary" (click)="cancelDelete()">
        Cancelar
      </button>
    </div>
  </div>
</div>
